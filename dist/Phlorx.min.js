/*!
 * @projectname: Phlorx v0.0.2
 * @repo: https://www.github.com/isocroft/phlorx
 * @author(s): Okechukwu Ifeora (@isocroft)
 * @contributor(s): nil
 * @copyright: Copyright (c) 2016 @cdv
 * @license: MIT  
 * @releasedate: 12/01/2016
 * @modifieddate : 28/07/2016
 *
 * Phlorx is a light-weight, task efficient, JavaScript library
 * for functional reactive programming inspired by Bacon.js &
 * RxJS
 *
 * It does not requires jQuery to work properly
 */
window.Phlorx=function(n,t,i){var g="style",k="class",y="href",it="querySelectorAll",b="object",h="function",f=!1,o=!0,r=null,d="string";function e(){return this}var c;i.uuid=0;
/*!
		   Helpers
		*/
var rt=d,p={}.hasOwnProperty,w=[].slice,ut=function(n,t){var f=n.attributes,u,i;try{return f.getNamedItem(t)}catch(e){for(u=0;u<f.length;u++)if(i=f[u],i.nodeName==t&&i.specified)return i;return r}},v=function(n,t){var u={xhr:r},f,i;if(i=typeof n.status=="undefined"?t.fakeStatus:n.status===1223?204:n.status,t.finished)return u;if(t.finished=o,notFound=i===404,i>=200&&i<400||!notFound)return u={err:r,xhr:n.statusText||n.responseText};if(u={err:i,xhr:n.responseText||n.response},i===0)throw new Error("Server Offline Or Unavailable");return u},et=function(){var i=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument","Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument","MSXML.DOMDocument"],t;if(n.ActiveXObject){for(t=0;t<i.length;t++)try{return new ActiveXObject(i[t])}catch(u){}return new ActiveXObject("Microsoft.XMLHTTP")}return r},a={STARTED:0,AWAIT:1,RESOLVED:2,REJECTED:3},ot=function(n){var t={};return String(n).split(",").forEach(function(n){t[n]=o}),t.savedData=!1,t},nt=function(n){var i=ot(n),c,l,s,a,v,t=[],u=i.multiple&&[],e=function(n){for(i.savedData=!e.$decline&&i.save&&n,a=o,v=o,s=c||0,l=t.length,c=0;s<l;s++)setTimeout(t[s].bind(n[0],n[1]),50);if(v=f,u&&u.length)return e(u.shift());e.$decline=f,i.savedData&&i.unpack&&(t.length=0)};return{add:function(){var n=0,r;return t&&(r=t.length,function u(i){i.forEach(function(i){var r=typeof i;r==h?n=t.push(i):!!i&&i.length&&typeof i!=d&&u([].slice.call(i))})}([].slice.call(arguments)),a&&i.join&&(c=r,l=n,e.$decline=o,e(i.savedData),this.disable())),n},hasFn:function(n){var i=f;return Object.each(t,function(t){typeof n==h&&n===t&&(i=o)},this),i},hasList:function(){return!!t},fireWith:function(){if(t&&(!a||u)){var n=arguments.length&&[].slice.call(arguments)||[r,0];v?u.push(n):e(n)}},disable:function(){i.savedData||(t=u=undefined)}}},l=function(){var s="join",t={resolve:["done","RESOLVED",nt([s,"save"])],reject:["fail","REJECTED",nt([s,"save"])],notify:["progress","AWAIT",nt([s,"multiple"])]},n=this,f=Object.keys(t),e=function(i,r,u){var f=i!="notify";return!r.length&&!u?t[i][2].fireWith:u?function(){return n.state>=0&&n.state<=1&&t[i][2].add.apply(n,w.call(arguments)),n}:function(){if(n.state>=0&&n.state<=1&&(n.state=a[t[i][1]]),t[i][2].fireWith(n===this?n:this,[].slice.call(arguments)),f){t[r[0]][2].disable(),t[r[1]][2].disable();switch(i){case"reject":case"resolve":n.state=a[t[i][1]]}}return o}},c=0,v=f.slice(),u,i={};for(u in t)p.call(t,u)&&(f.splice(c++,1),n[u]=e(u,f),n[u+"With"]=e(u,[]),i[t[u][0]]=e(u,[],o),f=v.slice());return i.state=a.STARTED,i.always=function(){return this.done.apply(n,arguments).fail.apply(n,arguments)},i.promise=function(n){if(n&&typeof n==b&&!n.length){for(var t in i)p.call(i,t)&&(n[t]=i[t]);return n}return i},i.then=function(){var i,r=[].slice.call(arguments);return r.forEach(function(r,u){r=typeof r==h&&r,n[t[f[u]][0]](function(){var n;try{n=r&&r.apply(this,arguments)}catch(t){n=this.reject(t)}finally{n&&typeof n.promise==h&&(i=n.promise())}})}),n.promise(i)},i.isResolved=function(){return!t.reject[2].hasList()},i.isRejected=function(){return!t.resolve[2].hasList()},i.pipe=i.then,i.promise(n),l.STARTED=a.STARTED,l.AWAITING=a.AWAIT,l.RESOLVED=a.RESOLVED,l.REJECTED=a.REJECTED,e=v=u=c=r,n instanceof l?n:new l},u={},tt={binds:{},promises:{}},st=function(){return++i.uuid+""},ft=i(p,w,n,tt),ht=!(it in t)&&function(){function u(){this.c={}}function pt(n){return vt.g(n)||vt.s(n,"(^|\\s+)"+n+"(\\s+|$)",1)}function tt(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])}function wt(n){for(var t=[],i=0,r=n.length;i<r;++i)p(n[i])?t=t.concat(n[i]):t[t.length]=n[i];return t}function a(n){for(var t=0,r=n.length,i=[];t<r;t++)i[t]=n[t];return i}function bt(t){while(t=t.previousSibling)if(t[n]==1)break;return t}function rt(n){return n.match(yi)}function ut(t,i,u,e,o,s,h,c,l,a,v){var y=this,b,d,p,w,k;if(y[n]!==1||i&&i!=="*"&&y[g]&&y[g].toLowerCase()!==i||u&&(d=u.match(ri))&&d[1]!==y.id)return f;if(u&&(k=u.match(ui)))for(b=k.length;b--;)if(!pt(k[b].slice(1)).test(y.className))return f;if(l&&r.pseudos[l]&&!r.pseudos[l](y,v))return f;if(e&&!h){w=y.attributes;for(p in w)if(hOwn.call(w,p)&&(w[p].name||p)==o)return y}return e&&!wi(s,gi(y,o)||"",h)?f:y}function e(n){return yt.g(n)||yt.s(n,n.replace(hi,"\\$1"))}function wi(n,t,r){switch(n){case"=":return t==r;case"^=":return t.match(i.g("^="+r)||i.s("^="+r,"^"+e(r),1));case"$=":return t.match(i.g("$="+r)||i.s("$="+r,e(r)+"$",1));case"*=":return t.match(i.g(r)||i.s(r,e(r),1));case"~=":return t.match(i.g("~="+r)||i.s("~="+r,"(?:^|\\s+)"+e(r)+"(?:\\s+|$)",1));case"|=":return t.match(i.g("|="+r)||i.s("|="+r,"^"+e(r)+"(-|$)",1))}return 0}function bi(t,i){var f=[],h=[],o,a,v,y,b,c,e,p,r=i,u=l.g(t)||l.s(t,t.split(at)),s=t.match(lt);if(!u.length||(y=(u=u.slice(0)).pop(),u.length&&(v=u[u.length-1].match(ot))&&(r=dt(i,v[1])),!r))return f;for(e=rt(y),c=r!==i&&r[n]!==9&&s&&/^[+~]$/.test(s[s.length-1])?function(t){while(r=r.nextSibling)r[n]==1&&(e[1]?e[1]==r[g].toLowerCase():1)&&(t[t.length]=r);return t}([]):r[w](e[1]||"*"),o=0,a=c.length;o<a;o++)(p=ut.apply(c[o],e))&&(f[f.length]=p);return u.length?(tt(f,function(n){kt(n,u,s)&&(h[h.length]=n)}),h):f}function ki(n,t,i){if(v(t))return n==t;if(p(t))return!!~wt(t).indexOf(n);for(var e=t.split(","),r,u;t=e.pop();)if(r=l.g(t)||l.s(t,t.split(at)),u=t.match(lt),r=r.slice(0),ut.apply(n,rt(r.pop()))&&(!r.length||kt(n,r,u,i)))return o;return f}function kt(n,t,i,r){function f(n,r,e){while(e=pi[i[r]](e,n))if(v(e)&&ut.apply(e,rt(t[r])))if(r){if(u=f(e,r-1,e))return u}else return e}var u;return(u=f(n,t.length-1,n))&&(!r||s(u,r))}function v(t,i){return t&&typeof t==b&&(i=t[n])&&(i==1||i==9)}function ft(n){var t=[],i,r;n:for(i=0;i<n.length;++i){for(r=0;r<t.length;++r)if(t[r]==n[i])continue n;t[t.length]=n[i]}return t}function p(n){return typeof n==b&&isFinite(n.length)}function di(t){return t?typeof t==d?r(t)[0]:!t[n]&&p(t)?t[0]:t:h}function dt(t,i,r){return t[n]===9?t.getElementById(i):t.ownerDocument&&((r=t.ownerDocument.getElementById(i))&&s(r,t)&&r||!s(t,t.ownerDocument)&&nt('[id="'+i+'"]',t)[0])}function r(n){var t,r,i=di(h);if(!i||!n)return[];if(n===window||v(n))return!_root||n!==window&&v(i)&&s(n,i)?[n]:[];if(n&&p(n))return wt(n);if(t=n.match(vi)){if(t[1])return(r=dt(i,t[1]))?[r]:[];if(t[2])return a(i[w](t[2]));if(hasByClass&&t[3])return a(i[ii](t[3]))}return nt(n,i)}function gt(t,i){return function(r){var e,u;if(st.test(r)){t[n]!==9&&((u=e=t.getAttribute("id"))||t.setAttribute("id",u="__qwerymeupscotty"),r='[id="'+u+'"]'+r,i(t.parentNode||t,r,o),e||t.removeAttribute("id"));return}r.length&&i(t,r,f)}}var h=t,c=h.documentElement,ii="getElementsByClassName",w="getElementsByTagName",et=it,nr="useNativeQSA",g="tagName",n="nodeType",nt,ri=/#([\w\-]+)/,ui=/\.[\w\-]+/g,ot=/^#([\w\-]+)$/,fi=/^\.([\w\-]+)$/,ei=/^([\w\-]+)$/,oi=/^([\w]+)?\.([\w\-]+)$/,st=/(^|,)\s*[>~+]/,si=/^\s+|\s*([,\s\+\~>]|$)\s*/g,ht=/[\s\>\+\~]/,ct=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,hi=/([.*+?\^=!:${}()|\[\]\/\\])/g,ci=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,li=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,ai=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,vi=new RegExp(ot.source+"|"+ei.source+"|"+fi.source),lt=new RegExp("("+ht.source+")"+ct.source,"g"),at=new RegExp(ht.source+ct.source),yi=new RegExp(ci.source+"("+li.source+")?("+ai.source+")?"),pi={" ":function(n){return n&&n!==c&&n.parentNode},">":function(n,t){return n&&n.parentNode==t.parentNode&&n.parentNode},"~":function(n){return n&&n.previousSibling},"+":function(n,t,i,r){return n?(i=bt(n))&&(r=bt(t))&&i==r&&i:f}};u.prototype={g:function(n){return this.c[n]||undefined},s:function(n,t,i){return t=i?new RegExp(t):t,this.c[n]=t}};var vt=new u,yt=new u,i=new u,l=new u;var s="compareDocumentPosition"in c?function(n,t){return(t.compareDocumentPosition(n)&16)==16}:"contains"in c?function(t,i){return i=i[n]===9||i==window?c:i,i!==t&&i.contains(t)}:function(n,t){while(n=n.parentNode)if(n===t)return 1;return 0},gi=function(){var n=h.createElement("p");return(n.innerHTML='<a href="#x">x<\/a>')&&n.firstChild.getAttribute(y)!="#x"?function(n,t){return t===k?n.className:t===y||t==="src"?n.getAttribute(t,2):n.getAttribute(t)}:function(n,t){return n.getAttribute(t)}}(),tr=function(t,i){var r=[],f,u;try{return i[n]===9||!st.test(t)?a(i[et](t)):(tt(f=t.split(","),gt(i,function(n,t){u=n[et](t),u.length==1?r[r.length]=u.item(0):u.length&&(r=r.concat(a(u)))})),f.length>1&&r.length>1?ft(r):r)}catch(e){}return ni(t,i)},ni=function(t,i){var u=[],e,h,r,o,f,c;if(t=t.replace(si,"$1"),h=t.match(oi)){for(f=pt(h[2]),e=i[w](h[1]||"*"),r=0,o=e.length;r<o;r++)f.test(e[r].className)&&(u[u.length]=e[r]);return u}return tt(c=t.split(","),gt(i,function(t,e,h){for(f=bi(e,t),r=0,o=f.length;r<o;r++)(t[n]===9||h||s(f[r],i))&&(u[u.length]=f[r])})),c.length>1&&u.length>1?ft(u):u},ti=function(){nt=ni};return ti(),r.configure=ti,r.uniq=ft,r.is=ki,r.pseudos={},r}()||t.querySelectorAll.bind(t);
/*!@submodule
	 * Document Object Model Helper
     */
return c={observe:function(i,u,e){var s="execScript";function l(){try{t.documentElement.doScroll("left"),a()}catch(i){n.setTimeout(l,0)}}function a(){e.call(r),DomReady=o}var h=f,v=i[0]===t,k=t.body,y="complete",d=f,c=s in window&&!p.call(window,s),w=c?"attachEvent":"addEventListener",b=function(){return function(n){(u!=="onreadystatechange"||t.readyState===y)&&(!~n||(n=window.event,n.stopPropagation=n.stopPropagation?n.stopPropagation:function(){n.cancelBubble=o},n.preventDefault=n.preventDefault?n.preventDefault:function(){n.returnValue=f},n.target=n.srcElement||(t.documentMode&&t.documentMode>=8?HTMLDocument:{}),n.root=n.target.ownerDocument||t,n.relatedTarget=n.type.indexOf("mouse")>-1&&n.fromElement===n.target?n.toElement:n.fromElement,n.currentTarget=n.currentTarget?this.parentNode:n.srcElement,n.timestamp=+new Date,n.metaKey=n.type.indexOf("key")>-1&&n.ctrlKey?n.ctrlKey:n.shiftKey,n.which=n.type=="click"?n.button:n.type.indexOf("key")>-1&&n.charCode!==r?n.charCode:n.keyCode,n.pageX=n.clientX+(t.body.scrollLeft||t.documentElement.scrollLeft||0)-(t.body.clientLeft||t.documentElement.clientLeft||0),n.pageY=n.clientY+(t.body.scrollTop||t.documentElement.scrollLeft||0)-(t.body.clientTop||t.documentElement.clientTop||0)),e.call(this,n))}};c&&(u=="DOMContentLoaded"&&(u="readystatechange"),u="on"+u);try{h=n.frameElement!==r}catch(g){}!h&&/loaded|readystate/i.test(u)&&v?l():(a=r,i.forEach(function(n,t){n[w](u,b(t))}))},unobserve:function(){},select:function(n){return w.call(ht(n))},get_current_pixel_style:function(n,t){var i=n.currentStyle[t]||0,r=n.style.left,u=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=t==="fontSize"?"1em":i,i=n.style.pixelLeft+"px",n.style.left=r,n.runtimeStyle.left=u,i},get_css_property:function(i,u,f){var s,h,e,o;f=f||"px";switch(u){case"float":u=t.all?"styleFloat":"cssFloat";break;case"margin":case"background":case"padding":case"border":case"borderTop":case"borderBottom":case"borderLeft":case"borderRight":u=r}if(u){switch({}.toString.call(i).substring(8,11)){case"Str":for(h=0;h<t.styleSheets.length;h++)for(e=t.styleSheets[h].cssRules,e||(e=t.styleSheets[h].rules),o=0;o<e.length;o++)if(e[o].selectorText==i)try{s=e[o].style.getPropertyValue(u)}catch(c){s=e[o].style.getAttribute(this.utils.decamelize(u,"-"))}break;case"HTM":case"Obj":s=i.style[u]?i.style[u]:n.getComputedStyle?n.getComputedStyle(i,r)[u]:i.runtimeStyle?f=="px"?this.get_current_pixel_style(i,u):i.runtimeStyle[u]:t.defaultView.getComputedStyle(i,r).getPropertyValue(this.utils.decamelizr(u,"-"));break;default:throw"invalid object "+i+" found!";}return s}},is_node:function(n){return n!==void 0&&n.nodeType},is_node_disconnected:function(n){return n!==void 0&&this.is_node(n)&&n.offsetParent===r},get_attrib:function(n,t,i){if(i){var u=ut(n,t);return u!=r?u.nodeValue:obj[t]}return t===k?n.className:t===y||t==="src"?n.getAttribute(t,2):t===g?n.style.cssText.toLowerCase():t==="for"?n.htmlFor:n.getAttribute(t)},set_attrib:function(n,i,u,f){if(f){var e=ut(n,i);e!==r?e.nodeValue=u:(e=t.createAttribute(i),e.value=u,n.setAttributeNode(e));return}return i===k?n.className=u:i===y?n.href=u:i===g?n.style.cssText+=""+u:n.setAttribute(i,u)},dom_name:function(n){return this.is_node(n)&&n.nodeName.toLowerCase()},utils:{decamelize:function(n,t){return n.replace(/([A-Z])/g,t+"$1").toLowerCase()},camelize:function(n,t){var i=new RegExp(t+"(.)","g");return s.replace(i,function(n,t){return t.toUpperCase()})}}},e.fn={type:function(){}},e.fn.each=Object.each,e.prototype=e.fn,e.fn.init=function(n){var t=[c.select(n)];return this.updateCollection=function(n){return t.unshift(n),this},this.getCurrentCollection=function(){return t[0]},this},e.fn.init.prototype={css:function(n){var t=this.getCurrentCollection();return typeof n==rt?c.get_css_property(t[0],n):(e.fn.each(t,function(t){for(var i in n)t.style.cssText+=c.utils.decamelize(i,"-")+":"+n[i]+";"}),this)},offCss:function(n){if(n!==r){var i,u,f=this.getCurrentCollection();return e.fn.each(f,function(r){t.all?(u=new RegExp(n+"\\:([#!*%\\w]+);"),i=c.get_attrib(r,g),i=i.replace(u,""),r.cssText+=i):r.removeProperty(n)}),this}},next:function(){var i,n,u=this.getCurrentCollection();return e.fn.each(u,function(u){if(i=u.parentNode,n=u.nextSibling,n&&i.childNodes.length>1)while(n!==r){if(n.nodeType==1)break;n.nodeType==3&&(n=n.nextSibling),n.nodeType==9&&(n=t)}}),this.updateCollection(n)},parent:function(){var n=[],t,i=this.getCurrentCollection();return e.fn.each(i,function(i){t=i.parentNode,n.push(t)}),this.updateCollection(n)},each:function(n){return e.fn.each(this.getCurrentCollection(),n),this},attr:function(n,t){var r,i=this.getCurrentCollection();return t?(e.fn.each(i,function(i){c.set_attrib(i,n,t)}),this):c.get_attrib(i[0],n)},removeAtrr:function(n){if(typeof n!==rt)return this;var t=this.getCurrentCollection();return e.fn.each(t,function(t){t.removeAttribute(n)}),this},html:function(n){var t=this.getCurrentCollection();return n?(e.fn.each(t,function(t){t.innerHTML=n}),this):t[0].innerHTML}},u.workStream=function(n){return new ft(n)},u.basicStream=function(n){return new ft(n,o)},u.UI={},u.UI.DOM=function(n){return new e.fn.init(n)},u.viaBinder=function(n){var t=this.basicStream(r),i=new l;return tt.binds[t.getEvent()]=i,typeof n==h&&i.then(function(t){n(t[0])}).then(function(n){t.whenUnsubscribe(n)}),t},u.viaDOM=function(n,i){return i=i||t,this.viaBinder(function(t){return c.observe(c.select(i),n,t),function(){c.unobserve(c.select(i),n,t)}})},u.interval=function(n,t){return this.viaBinder(function(i){var r=setInterval(function(){i(typeof t==h?t():t)},n);return function(){clearInterval(r)}})},u.viaPoll=function(n,t){return this.interval(n,t)},u.viaCallback=function(n){this.viaBinder(n)},u.viaNodeCallback=u.viaCallback,u.ajax=function(t,i){var u,e,s;t=t||{},i=i||f,u=r,e=new l;try{u=et(),u===r&&(u=new XMLHttpRequest),t.crossdomain&&"XDomainRequest"in n&&(u=new XDomainRequest)}catch(h){}t.headers||(t.headers={});for(s in t.headers)headers.hasOwnProperty(s)&&u.setRequestHeader(s,headers[s]);!i&&t.method&&t.url&&(u instanceof n.XDomainRequest?(u.open(t.method,t.url),u.onload=function(){e.resolve(v(u,{fakeStatus:200}).xhr)},u.onerror=function(){e.reject(v(u,{fakeStatus:400}).xhr)},u.ontimeout=function(){e.reject(v(u,{fakeStatus:0}).xhr)},u.onprogress=function(){},u.timeout=0):(u.open(t.method,t.url,!i),u.onreadystatechange=function(){u.readyState===4&&(u.status>=400?e.reject(v(u,{status:u.status,error:o}).xhr):e.resolve(v(u,{status:u.status,error:f}).xhr))}));try{u.send(t.data)}catch(h){u=r}return e.promise()},u.sequentially=function(n,t){return t=t||[],n=n||0,this.viaPoll(n,function(){return t.shift()})},u.viaArray=function(n){return this.sequentially(r,n)},u.later=function(n,t){return this.sequentially(n,[t])},u.viaPromise=function(n){var t=this.workStream(r);if(tt.promises[st()]=n,n&&typeof n.promise==h&&typeof n.promise().then==h)typeof n.then==h&&n.then(function(){t.fireAtCore.apply(t,w.call(arguments))},function(n){t.getErrorHandle()(n)});else throw new TypeError("first argument must be a standard promise object");return t},u.retry=function(n){n=n||{};var t=function(i){if(typeof n.source==h){if(typeof n.retryCount=="number"?++n.retryCount:n.retryCount=1,n.retryCount!==n.retries){var u=n.source();u.onValue(function(n){i.fireAtCore(n),i=r});u.onError(function(){setTimeout(function(){i.offValue(),t(i)},typeof n.delay==h&&n.delay()||0)})}}else i=r},i=this.workStream();return t(i),i},u}(this,this.document,function(n,t,i,r){var h="first argument must be a function",o=!0,e="function",f=null,s="number",c="undefined",l="string";function y(n){var i=this;if(typeof n!=l)throw new TypeError("first argument nust be a string");var r,v=n,y=[],u=a(i),p=function(n,i,r){r&&typeof r!=c||i&&typeof i==s&&(r=i);var u=now=(new Date).getMilliseconds(),f;return function(){now=(new Date).getMillisecond(),f=now-u;var i=this;f>=r&&n.apply(i,t.call(arguments)),u=now}};return i.onError=function(n){r===f&&(r=n)},i.offError=function(){r&&(r=f)},i.getErrorHandle=function(){return function(n){typeof r==e&&r(n)}},i.toString=function(){return"[object Stream]"},i.log=function(){u.canLog=o},i.getEvent=function(){return v},i.getDelayFn=function(){return p},i.onValue=function(n){return u.on(this.getEvent(),n,this)},i.offValue=function(){return u.off(this.getEvent())},i.whenUnsubscribe=function(n){typeof n==e&&u.whenOff(n)},i.hasCoreEvent=function(){return u.has(this.getEvent())},i.fireAtCore=function(n){try{return u.emit(this.getEvent(),n)}catch(t){this.getErrorHandle()(t)}},i.queryQueue=function(n,t){if(typeof n!=e)throw new Error(h);return n.call(t,y)},i.linkStream=function(n,t){if(n===f)throw new Error("[Stream] not okay");if(typeof n.onValue==typeof this.onValue)this.onValue(function(i){var r=typeof t==e;n.fireAtCore(r?t(i):i)})},i}function u(n,i){var u=y.apply(this,[v(26)]),e=this,f;return i&&(f=u.onValue||function(){},u.onValue=function(i){var u=this,e=u;f.call(u,i),console.log("lala",u.getEvent(),r.binds),u.getEvent()in r.binds?r.binds[u.getEvent()].resolve(function(n){if(stream=e.getStream(),n===void 0){stream.offValue();return}if(n instanceof Error){stream.getErrorHandle()(n);return}stream.fireAtCore.apply(stream,t.call(arguments))}):u.fireAtCore(n)}),this.getStream=function(){return u},u}Object.keyExists=function(t,i){return!!t[i]&&n.call(t,i)},Array.filter=Array.filter||function(n,t,i){if(n instanceof Array||typeof t==e){var r,u=n,f=[];for(d=0;d<u.length;++d)r=u[d],t.call(i,r,d,u)===o&&f.push(r);return f}},Array.isArray=Array.isArray||function(n){return n&&n instanceof Array},Function.prototype.bind||(Function.prototype.bind=function(n){var f=t.call(arguments,1),r=this,i=function(){},u=function(){return r.apply(this instanceof i?this:n||{},f.concat(t.call(arguments)))};return i.prototype=r.prototype,u.prototype=new i,u}),Object.each=function(i,r,u){var f,h,l,c;if(i)if(typeof i==e)for(f in i)f!="prototype"&&f!="length"&&f!="name"&&(!i.hasOwnProperty||n.call(i,f))&&r.call(u,i[f],f,i);else if(Array.isArray(i)||i&&"length"in i&&typeof i.length==s)for(c=typeof i!="object",f=0,h=i.length;f<h;f++)(c||f in i)&&r.call(u,i[f],f,i);else if(i.forEach)i.forEach(function(){r.apply(this,t.call(arguments))},u);else{results={};for(f in i)i.hasOwnProperty(f)&&r.call(u,i[f],f,i)}return o};var a=function(){var n={},r=[],s=function(n){var t={};return Object.each(n,function(n){this[n.name]=n.result},t),t},u=function(n){return n.indexOf("->",0)>0?n.split("->",2):[]};return{acumulator:function(){},canLog:!1,emit:function(r){var e,l=-1,a=[],v,y={},w,p=t.call(arguments,1),h=!1;if(e=u(r),e.length?(r=e[0],e[0]=String(h),h=n[r]):(e.push([]),h=n[r]),this.canLog&&i.console!==void 0&&i.console.log("Phlorx Event Log: ",p),h)while(l<h.length-1){if(l=l+1,v=h[l].name,!!e[0][0])if(e[1]===v)e[0]=o;else continue;if(a.unshift({result:h[l].fn.apply(h[l].cxt,p),name:v}),(a[0].result===f||typeof a[0].result==c)&&a.shift(),e[0]===o)break}return l=0,y[r]=a.length?s(a):f,y},on:function(t,i,r){var f,o=this,u=t.indexOf(":")>-1?t.split(":",2):t;if(typeof t==l&&typeof i==e)return t=typeof u==l?u:u[1],Object.keyExists(n,t)||(n[t]=[]),f=Array.isArray(u)?u[0]:""+n[t].length,n[t].push({name:f,cxt:r,fn:i,timestamp:+new Date}),n[t].sort(function(n,t){n.timestamp-t.timestamp}),o},once:function(){},whenOff:function(n){r.push(n)},has:function(t){return t?n.hasOwnProperty(t):!!t},poof:function(){n={}},emitList:function(n,t,i){var o={},e,r,f;if(Array.isArray(n))for(f=0;f<n.length;f++)r=n[f],e=u(r)[0]||r,o[e]=this.emit(r,t,i)[e];return},off:function(t,i){var u=[],o=this;return n[t]&&(i===f||typeof i==c?delete n[t]:(Array.filter(n[t],function(n,t){if(n&&n.name===i)return!!u.push(t)}),Object.each(u,function(n){this.splice(n,1)},n[t])),Object.each(r,function(n){typeof n==e&&setTimeout(n,1)})),o}}},v=function(n){return Math.round(Math.pow(30,n+1)-Math.random()*Math.pow(30,n)).toString(30).slice(1)};return u.prototype.filter=function(n){if(typeof n!=e)throw new TypeError(h);var i=this.getStream(),t=new u(f);i.onValue(function(i){n(i)===o&&t.fireAtCore(i)});return t},u.prototype.take=function(n){return t.integer=n||0,this.filter(function t(){return--t.integer,t.integer!==0})},u.prototype.once=function(n){var i=this.getStream(),t=new u(n,o);return t.take(1)},u.prototype.map=function(n){if(typeof n!=e)throw new TypeError(h);var i=this.getStream(),t=new u(f);return i.linkStream(t,n),t},u.prototype.mergeToNew=function(n){if(typeof n!="object"||!(n instanceof u))throw new TypeError("first argument must be a [Stream] object");var r=this.getStream(),t=new u(f),i=function(n){return function(t){this.queryQueue(function(n){n.push(t)}),n.fireAtCore(t)}};r.onValue(i(t));n.onValue(i(t));return t},u.prototype.flatMap=function(n){var i=function(n,t){return function(){t.apply(this,arguments).linkStream(n)}},r=this.getStream(),t=new u(f);r.onValue(i(t,n));return t},u.prototype.combineLatest=function(n,t){var i=this,r=i.mergeToNew(n);r.onValue(function(){var u=function(n){return Boolean(!!n[0])},e=function(n){return n.shift()};i.queryQueue(u)===n.queryQueue(u)&&t.apply(f,[i.queryQueue(e),n.queryQueue(e)])});return r},u.prototype.scan=function(n,t){var i=function(t){return function(i){return i=n,t(i)}};return this.map(i(t))},u.prototype.throttle=function(n){if(typeof n!=s)throw new TypeError("first argument must be a number");var r=this.getDelayFn(),i=this.getStream(),t=new u(i.getEvent());i.onValue(r(function(){t.fireAtCore.apply(t,arguments)},n));return t},u})